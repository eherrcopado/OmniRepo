<?xml version="1.0" encoding="UTF-8"?>
<BatchCalcJobDefinition xmlns="http://soap.sforce.com/2006/04/metadata">
    <aggregates>
        <description>Aggregate BenefitValue Group By Indicator Performance Period</description>
        <fields>
            <aggregateFunction>Sum</aggregateFunction>
            <alias>TotalBenefitValue</alias>
            <sourceFieldName>ActualBenefitValue</sourceFieldName>
        </fields>
        <groupBy>IndicatorPerformancePeriod_Id</groupBy>
        <groupBy>IndicatorResult_Id</groupBy>
        <groupBy>MeasurementDate</groupBy>
        <label>Aggregate BenefitValue Group By Indicator Performance Period</label>
        <name>Aggregate_BenefitValue_Group_By_Indicator_Performance_Period</name>
        <sourceName>Update_BenefitValue_For_Invalid_Records</sourceName>
    </aggregates>
    <appends>
        <description>Benefit Assignment And Indicator Records</description>
        <isDisjointedSchema>false</isDisjointedSchema>
        <label>Benefit Assignment And Indicator Records</label>
        <name>Benefit_Assignment_And_Indicator_Records</name>
        <sources>Benefit_Assignment_And_Indicator_Records_When_IA_Type_Equals_Program</sources>
        <sources>Benefit_Assignment_And_Indicator_Records_When_IA_Type_Equals_Program_Product</sources>
    </appends>
    <datasources>
        <description>Benefit Assignment Data Source</description>
        <fields>
            <alias>Benefit_BenefitTypeId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Benefit.BenefitTypeId</name>
        </fields>
        <fields>
            <alias>Benefit_Product2Id</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Benefit.Product2Id</name>
        </fields>
        <fields>
            <alias>Benefit_ProgramId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Benefit.ProgramId</name>
        </fields>
        <fields>
            <alias>BenefitAssignment_LastModifiedDate</alias>
            <dataType>DateTime</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>LastModifiedDate</name>
        </fields>
        <fields>
            <alias>BenefitAssignment_ProgramEnrollmentId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>ProgramEnrollmentId</name>
        </fields>
        <fields>
            <alias>BenefitAssignment_Quantity</alias>
            <dataType>Numeric</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Quantity</name>
        </fields>
        <fields>
            <alias>BenefitAssignment_TotalApprovedAmount</alias>
            <dataType>Numeric</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>TotalApprovedAmount</name>
        </fields>
        <label>Benefit Assignment</label>
        <name>Benefit_Assignment</name>
        <sourceName>BenefitAssignment</sourceName>
        <type>StandardObject</type>
    </datasources>
    <datasources>
        <description>Benefit Type Data Source</description>
        <fields>
            <alias>BenefitType_Category</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Category</name>
        </fields>
        <fields>
            <alias>BenefitType_Id</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Id</name>
        </fields>
        <label>Benefit Type</label>
        <name>Benefit_Type</name>
        <sourceName>BenefitType</sourceName>
        <type>StandardObject</type>
    </datasources>
    <datasources>
        <description>Indicator Assignment Data Source</description>
        <fields>
            <alias>IndicatorAssignment_Id</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Id</name>
        </fields>
        <fields>
            <alias>IndicatorAssignment_IndicatorAssignmentType</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>IndicatorAssignmentType</name>
        </fields>
        <fields>
            <alias>IndicatorDefinition_Status</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>IndicatorDefinition.Status</name>
        </fields>
        <fields>
            <alias>IndicatorAssignment_IndicatorDefinitionId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>IndicatorDefinitionId</name>
        </fields>
        <fields>
            <alias>IndicatorAssignment_ProgramId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>ProgramId</name>
        </fields>
        <fields>
            <alias>ProgramProduct_ProductId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>ProgramProduct.ProductId</name>
        </fields>
        <fields>
            <alias>ProgramProduct_ProgramId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>ProgramProduct.ProgramId</name>
        </fields>
        <fields>
            <alias>IndicatorAssignment_Status</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Status</name>
        </fields>
        <label>Indicator Assignment</label>
        <name>Indicator_Assignment</name>
        <sourceName>IndicatorAssignment</sourceName>
        <type>StandardObject</type>
    </datasources>
    <datasources>
        <description>Indicator Performance Period Data Source</description>
        <fields>
            <alias>IndicatorPerformancePeriod_Id</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Id</name>
        </fields>
        <fields>
            <alias>IndicatorPerformancePeriod_IndicatorAssignmentId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>IndicatorAssignmentId</name>
        </fields>
        <fields>
            <alias>TimePeriod_EndDate</alias>
            <dataType>DateTime</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>TimePeriod.EndDate</name>
        </fields>
        <fields>
            <alias>TimePeriod_StartDate</alias>
            <dataType>DateTime</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>TimePeriod.StartDate</name>
        </fields>
        <label>Indicator Performance Period</label>
        <name>Indicator_Performance_Period</name>
        <sourceName>IndicatorPerformancePeriod</sourceName>
        <type>StandardObject</type>
    </datasources>
    <datasources>
        <description>Indicator Result Data Source</description>
        <fields>
            <alias>IndicatorResult_Id</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>Id</name>
        </fields>
        <fields>
            <alias>IndicatorResult_IndicatorPerformancePeriodId</alias>
            <dataType>Text</dataType>
            <isPrimaryKey>false</isPrimaryKey>
            <name>IndicatorPerformancePeriodId</name>
        </fields>
        <label>Indicator Result</label>
        <name>Indicator_Result</name>
        <sourceName>IndicatorResult</sourceName>
        <type>StandardObject</type>
    </datasources>
    <description>Clean Energy Program Benefit Assignment Aggregator</description>
    <executionPlatformType>CRMA</executionPlatformType>
    <filters>
        <criteria>
            <inputVariable>Benefit_Type_Category</inputVariable>
            <operator>In</operator>
            <sequence>1</sequence>
            <sourceFieldName>BenefitType_Category</sourceFieldName>
        </criteria>
        <description>Filter Benefit Assignment Records by BenefitType Category</description>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>Filter Benefit Assignment Records by Benefit Type Category</label>
        <name>Filter_Benefit_Assignment_Records_by_Benefit_Type_Category</name>
        <sourceName>Add_Benefit_Type_To_Benefit_Assignment</sourceName>
    </filters>
    <filters>
        <criteria>
            <operator>Equals</operator>
            <sequence>1</sequence>
            <sourceFieldName>IndicatorAssignment_Status</sourceFieldName>
            <value>Active</value>
        </criteria>
        <criteria>
            <operator>Equals</operator>
            <sequence>2</sequence>
            <sourceFieldName>IndicatorDefinition_Status</sourceFieldName>
            <value>Active</value>
        </criteria>
        <criteria>
            <inputVariable>Indicator_Definition_Id</inputVariable>
            <operator>Equals</operator>
            <sequence>3</sequence>
            <sourceFieldName>IndicatorAssignment_IndicatorDefinitionId</sourceFieldName>
        </criteria>
        <description>Filter Indicator Assignment And Related Records By Indicator Definition Id</description>
        <filterCondition>1 AND 2 AND 3</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>Filter Indicator Assignment And Related Records By Indicator Definition Id</label>
        <name>Filter_Indicator_Assignment_And_Related_Records_By_Indicator_Definition_Id</name>
        <sourceName>Indicator_Assignment</sourceName>
    </filters>
    <filters>
        <criteria>
            <operator>Equals</operator>
            <sequence>1</sequence>
            <sourceFieldName>IndicatorAssignment_IndicatorAssignmentType</sourceFieldName>
            <value>Program</value>
        </criteria>
        <description>Filter Indicator Records Where Indicator Assignment Type Equals Program</description>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>Filter Indicator Records Where IA Type Equals Program</label>
        <name>Filter_Indicator_Records_Where_IA_Type_Equals_Program</name>
        <sourceName>Indicator_Performance_Period_and_Indicator_Assignment</sourceName>
    </filters>
    <filters>
        <criteria>
            <operator>Equals</operator>
            <sequence>1</sequence>
            <sourceFieldName>IndicatorAssignment_IndicatorAssignmentType</sourceFieldName>
            <value>Program Product</value>
        </criteria>
        <description>Filter Indicator Records Where Indicator Assignment Type Equals Program Product</description>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>Filter Indicator Records Where IA Type Equals Program Product</label>
        <name>Filter_Indicator_Records_Where_IA_Type_Equals_Program_Product</name>
        <sourceName>Indicator_Performance_Period_and_Indicator_Assignment</sourceName>
    </filters>
    <filters>
        <criteria>
            <operator>IsNull</operator>
            <sequence>1</sequence>
            <sourceFieldName>IndicatorResult_Id</sourceFieldName>
        </criteria>
        <description>IndicatorResult Records To Create</description>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>IndicatorResult Records To Create</label>
        <name>IndicatorResult_Records_To_Create</name>
        <sourceName>Aggregate_BenefitValue_Group_By_Indicator_Performance_Period</sourceName>
    </filters>
    <filters>
        <criteria>
            <operator>IsNotNull</operator>
            <sequence>1</sequence>
            <sourceFieldName>IndicatorResult_Id</sourceFieldName>
        </criteria>
        <description>IndicatorResult Records To Update</description>
        <filterCondition>1</filterCondition>
        <isDynamicFilter>false</isDynamicFilter>
        <label>IndicatorResult Records To Update</label>
        <name>IndicatorResult_Records_To_Update</name>
        <sourceName>Aggregate_BenefitValue_Group_By_Indicator_Performance_Period</sourceName>
    </filters>
    <isTemplate>false</isTemplate>
    <joins>
        <description>Add Benefit Type To Benefit Assignment</description>
        <fields>
            <alias>BenefitAssignment_LastModifiedDate</alias>
            <sourceFieldName>BenefitAssignment_LastModifiedDate</sourceFieldName>
            <sourceName>Benefit_Assignment</sourceName>
        </fields>
        <fields>
            <alias>BenefitAssignment_ProgramEnrollmentId</alias>
            <sourceFieldName>BenefitAssignment_ProgramEnrollmentId</sourceFieldName>
            <sourceName>Benefit_Assignment</sourceName>
        </fields>
        <fields>
            <alias>BenefitAssignment_Quantity</alias>
            <sourceFieldName>BenefitAssignment_Quantity</sourceFieldName>
            <sourceName>Benefit_Assignment</sourceName>
        </fields>
        <fields>
            <alias>BenefitAssignment_TotalApprovedAmount</alias>
            <sourceFieldName>BenefitAssignment_TotalApprovedAmount</sourceFieldName>
            <sourceName>Benefit_Assignment</sourceName>
        </fields>
        <fields>
            <alias>BenefitType_Category</alias>
            <sourceFieldName>BenefitType_Category</sourceFieldName>
            <sourceName>Benefit_Type</sourceName>
        </fields>
        <fields>
            <alias>Benefit_Product2Id</alias>
            <sourceFieldName>Benefit_Product2Id</sourceFieldName>
            <sourceName>Benefit_Assignment</sourceName>
        </fields>
        <fields>
            <alias>Benefit_ProgramId</alias>
            <sourceFieldName>Benefit_ProgramId</sourceFieldName>
            <sourceName>Benefit_Assignment</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>Benefit_BenefitTypeId</primarySourceFieldName>
            <secondarySourceFieldName>BenefitType_Id</secondarySourceFieldName>
        </joinKeys>
        <label>Add Benefit Type To Benefit Assignment</label>
        <name>Add_Benefit_Type_To_Benefit_Assignment</name>
        <primarySourceName>Benefit_Assignment</primarySourceName>
        <secondarySourceName>Benefit_Type</secondarySourceName>
        <type>LeftOuter</type>
    </joins>
    <joins>
        <description>Add Indicator Result To Indicator Performance Period</description>
        <fields>
            <alias>IndicatorPerformancePeriod_Id</alias>
            <sourceFieldName>IndicatorPerformancePeriod_Id</sourceFieldName>
            <sourceName>Indicator_Performance_Period</sourceName>
        </fields>
        <fields>
            <alias>IndicatorPerformancePeriod_IndicatorAssignmentId</alias>
            <sourceFieldName>IndicatorPerformancePeriod_IndicatorAssignmentId</sourceFieldName>
            <sourceName>Indicator_Performance_Period</sourceName>
        </fields>
        <fields>
            <alias>IndicatorResult_Id</alias>
            <sourceFieldName>IndicatorResult_Id</sourceFieldName>
            <sourceName>Indicator_Result</sourceName>
        </fields>
        <fields>
            <alias>TimePeriod_EndDate</alias>
            <sourceFieldName>TimePeriod_EndDate</sourceFieldName>
            <sourceName>Indicator_Performance_Period</sourceName>
        </fields>
        <fields>
            <alias>TimePeriod_StartDate</alias>
            <sourceFieldName>TimePeriod_StartDate</sourceFieldName>
            <sourceName>Indicator_Performance_Period</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>IndicatorPerformancePeriod_Id</primarySourceFieldName>
            <secondarySourceFieldName>IndicatorResult_IndicatorPerformancePeriodId</secondarySourceFieldName>
        </joinKeys>
        <label>Add Indicator Result To Indicator Performance Period</label>
        <name>Add_Indicator_Result_To_Indicator_Performance_Period</name>
        <primarySourceName>Indicator_Performance_Period</primarySourceName>
        <secondarySourceName>Indicator_Result</secondarySourceName>
        <type>LeftOuter</type>
    </joins>
    <joins>
        <description>Benefit Assignment And Indicator Records When Indicator Assignment Type Equals Program</description>
        <fields>
            <alias>BenefitAssignment_LastModifiedDate</alias>
            <sourceFieldName>BenefitAssignment_LastModifiedDate</sourceFieldName>
            <sourceName>Filter_Benefit_Assignment_Records_by_Benefit_Type_Category</sourceName>
        </fields>
        <fields>
            <alias>BenefitAssignment_ProgramEnrollmentId</alias>
            <sourceFieldName>BenefitAssignment_ProgramEnrollmentId</sourceFieldName>
            <sourceName>Filter_Benefit_Assignment_Records_by_Benefit_Type_Category</sourceName>
        </fields>
        <fields>
            <alias>BenefitAssignment_Quantity</alias>
            <sourceFieldName>BenefitAssignment_Quantity</sourceFieldName>
            <sourceName>Filter_Benefit_Assignment_Records_by_Benefit_Type_Category</sourceName>
        </fields>
        <fields>
            <alias>BenefitAssignment_TotalApprovedAmount</alias>
            <sourceFieldName>BenefitAssignment_TotalApprovedAmount</sourceFieldName>
            <sourceName>Filter_Benefit_Assignment_Records_by_Benefit_Type_Category</sourceName>
        </fields>
        <fields>
            <alias>IndicatorPerformancePeriod_Id</alias>
            <sourceFieldName>IndicatorPerformancePeriod_Id</sourceFieldName>
            <sourceName>Filter_Indicator_Records_Where_IA_Type_Equals_Program</sourceName>
        </fields>
        <fields>
            <alias>IndicatorResult_Id</alias>
            <sourceFieldName>IndicatorResult_Id</sourceFieldName>
            <sourceName>Filter_Indicator_Records_Where_IA_Type_Equals_Program</sourceName>
        </fields>
        <fields>
            <alias>TimePeriod_EndDate</alias>
            <sourceFieldName>TimePeriod_EndDate</sourceFieldName>
            <sourceName>Filter_Indicator_Records_Where_IA_Type_Equals_Program</sourceName>
        </fields>
        <fields>
            <alias>TimePeriod_StartDate</alias>
            <sourceFieldName>TimePeriod_StartDate</sourceFieldName>
            <sourceName>Filter_Indicator_Records_Where_IA_Type_Equals_Program</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>IndicatorAssignment_ProgramId</primarySourceFieldName>
            <secondarySourceFieldName>Benefit_ProgramId</secondarySourceFieldName>
        </joinKeys>
        <label>Benefit Assignment And Indicator Records When IA Type Equals Program</label>
        <name>Benefit_Assignment_And_Indicator_Records_When_IA_Type_Equals_Program</name>
        <primarySourceName>Filter_Indicator_Records_Where_IA_Type_Equals_Program</primarySourceName>
        <secondarySourceName>Filter_Benefit_Assignment_Records_by_Benefit_Type_Category</secondarySourceName>
        <type>LeftOuter</type>
    </joins>
    <joins>
        <description>Benefit Assignment And Indicator Records When Indicator Assignment Type Equals Program Product</description>
        <fields>
            <alias>BenefitAssignment_LastModifiedDate</alias>
            <sourceFieldName>BenefitAssignment_LastModifiedDate</sourceFieldName>
            <sourceName>Filter_Benefit_Assignment_Records_by_Benefit_Type_Category</sourceName>
        </fields>
        <fields>
            <alias>BenefitAssignment_ProgramEnrollmentId</alias>
            <sourceFieldName>BenefitAssignment_ProgramEnrollmentId</sourceFieldName>
            <sourceName>Filter_Benefit_Assignment_Records_by_Benefit_Type_Category</sourceName>
        </fields>
        <fields>
            <alias>BenefitAssignment_Quantity</alias>
            <sourceFieldName>BenefitAssignment_Quantity</sourceFieldName>
            <sourceName>Filter_Benefit_Assignment_Records_by_Benefit_Type_Category</sourceName>
        </fields>
        <fields>
            <alias>BenefitAssignment_TotalApprovedAmount</alias>
            <sourceFieldName>BenefitAssignment_TotalApprovedAmount</sourceFieldName>
            <sourceName>Filter_Benefit_Assignment_Records_by_Benefit_Type_Category</sourceName>
        </fields>
        <fields>
            <alias>IndicatorPerformancePeriod_Id</alias>
            <sourceFieldName>IndicatorPerformancePeriod_Id</sourceFieldName>
            <sourceName>Filter_Indicator_Records_Where_IA_Type_Equals_Program_Product</sourceName>
        </fields>
        <fields>
            <alias>IndicatorResult_Id</alias>
            <sourceFieldName>IndicatorResult_Id</sourceFieldName>
            <sourceName>Filter_Indicator_Records_Where_IA_Type_Equals_Program_Product</sourceName>
        </fields>
        <fields>
            <alias>TimePeriod_EndDate</alias>
            <sourceFieldName>TimePeriod_EndDate</sourceFieldName>
            <sourceName>Filter_Indicator_Records_Where_IA_Type_Equals_Program_Product</sourceName>
        </fields>
        <fields>
            <alias>TimePeriod_StartDate</alias>
            <sourceFieldName>TimePeriod_StartDate</sourceFieldName>
            <sourceName>Filter_Indicator_Records_Where_IA_Type_Equals_Program_Product</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>ProgramProduct_ProductId</primarySourceFieldName>
            <secondarySourceFieldName>Benefit_Product2Id</secondarySourceFieldName>
        </joinKeys>
        <joinKeys>
            <primarySourceFieldName>ProgramProduct_ProgramId</primarySourceFieldName>
            <secondarySourceFieldName>Benefit_ProgramId</secondarySourceFieldName>
        </joinKeys>
        <label>Benefit Assignment And Indicator Records When IA Type Equals Program Product</label>
        <name>Benefit_Assignment_And_Indicator_Records_When_IA_Type_Equals_Program_Product</name>
        <primarySourceName>Filter_Indicator_Records_Where_IA_Type_Equals_Program_Product</primarySourceName>
        <secondarySourceName>Filter_Benefit_Assignment_Records_by_Benefit_Type_Category</secondarySourceName>
        <type>LeftOuter</type>
    </joins>
    <joins>
        <description>Indicator Performance Period and Indicator Assignment Join</description>
        <fields>
            <alias>IndicatorAssignment_IndicatorAssignmentType</alias>
            <sourceFieldName>IndicatorAssignment_IndicatorAssignmentType</sourceFieldName>
            <sourceName>Filter_Indicator_Assignment_And_Related_Records_By_Indicator_Definition_Id</sourceName>
        </fields>
        <fields>
            <alias>IndicatorAssignment_ProgramId</alias>
            <sourceFieldName>IndicatorAssignment_ProgramId</sourceFieldName>
            <sourceName>Filter_Indicator_Assignment_And_Related_Records_By_Indicator_Definition_Id</sourceName>
        </fields>
        <fields>
            <alias>IndicatorPerformancePeriod_Id</alias>
            <sourceFieldName>IndicatorPerformancePeriod_Id</sourceFieldName>
            <sourceName>Add_Indicator_Result_To_Indicator_Performance_Period</sourceName>
        </fields>
        <fields>
            <alias>IndicatorResult_Id</alias>
            <sourceFieldName>IndicatorResult_Id</sourceFieldName>
            <sourceName>Add_Indicator_Result_To_Indicator_Performance_Period</sourceName>
        </fields>
        <fields>
            <alias>ProgramProduct_ProductId</alias>
            <sourceFieldName>ProgramProduct_ProductId</sourceFieldName>
            <sourceName>Filter_Indicator_Assignment_And_Related_Records_By_Indicator_Definition_Id</sourceName>
        </fields>
        <fields>
            <alias>ProgramProduct_ProgramId</alias>
            <sourceFieldName>ProgramProduct_ProgramId</sourceFieldName>
            <sourceName>Filter_Indicator_Assignment_And_Related_Records_By_Indicator_Definition_Id</sourceName>
        </fields>
        <fields>
            <alias>TimePeriod_EndDate</alias>
            <sourceFieldName>TimePeriod_EndDate</sourceFieldName>
            <sourceName>Add_Indicator_Result_To_Indicator_Performance_Period</sourceName>
        </fields>
        <fields>
            <alias>TimePeriod_StartDate</alias>
            <sourceFieldName>TimePeriod_StartDate</sourceFieldName>
            <sourceName>Add_Indicator_Result_To_Indicator_Performance_Period</sourceName>
        </fields>
        <joinKeys>
            <primarySourceFieldName>IndicatorPerformancePeriod_IndicatorAssignmentId</primarySourceFieldName>
            <secondarySourceFieldName>IndicatorAssignment_Id</secondarySourceFieldName>
        </joinKeys>
        <label>Indicator Performance Period and Indicator Assignment</label>
        <name>Indicator_Performance_Period_and_Indicator_Assignment</name>
        <primarySourceName>Add_Indicator_Result_To_Indicator_Performance_Period</primarySourceName>
        <secondarySourceName>Filter_Indicator_Assignment_And_Related_Records_By_Indicator_Definition_Id</secondarySourceName>
        <type>Inner</type>
    </joins>
    <label>Clean Energy Program Benefit Assignment Aggregator</label>
    <parameters>
        <dataType>Text</dataType>
        <description>Benefit Assignment Field To Aggregate</description>
        <isMultiValue>false</isMultiValue>
        <label>Benefit Assignment Aggregation Field</label>
        <name>Benefit_Assignment_Aggregation_Field</name>
    </parameters>
    <parameters>
        <dataType>Text</dataType>
        <description>Benefit Type Category To Aggregate</description>
        <isMultiValue>false</isMultiValue>
        <label>Benefit Type Category</label>
        <name>Benefit_Type_Category</name>
    </parameters>
    <parameters>
        <dataType>Text</dataType>
        <description>Indicator Definition Id</description>
        <isMultiValue>false</isMultiValue>
        <label>Indicator Definition Id</label>
        <name>Indicator_Definition_Id</name>
    </parameters>
    <processType>DataProcessingEngine</processType>
    <status>Active</status>
    <transforms>
        <description>Transform Benefit Assignment And Indicator Records</description>
        <expressionFields>
            <alias>BenefitValue</alias>
            <dataType>Numeric</dataType>
            <decimalPlaces>2</decimalPlaces>
            <expression>CASE({$Benefit_Assignment_Aggregation_Field},&quot;Quantity&quot;, IF(ISNULL({BenefitAssignment_Quantity}),0,{BenefitAssignment_Quantity}), &quot;TotalApprovedAmount&quot;,IF(ISNULL({BenefitAssignment_TotalApprovedAmount}),0,{BenefitAssignment_TotalApprovedAmount}),0)</expression>
            <length>16</length>
        </expressionFields>
        <expressionFields>
            <alias>IsModifiedWithinTimePeriod</alias>
            <dataType>Numeric</dataType>
            <decimalPlaces>0</decimalPlaces>
            <expression>IF({BenefitAssignment_LastModifiedDate} &gt;=  {TimePeriod_StartDate} &amp;&amp; {BenefitAssignment_LastModifiedDate} &lt;=  MIN(TODAY() + (-1), {TimePeriod_EndDate})  , 1, 0)</expression>
            <length>1</length>
        </expressionFields>
        <expressionFields>
            <alias>IsProgramEnrollmentPresent</alias>
            <dataType>Numeric</dataType>
            <decimalPlaces>0</decimalPlaces>
            <expression>IF(ISNULL({BenefitAssignment_ProgramEnrollmentId} ) , 0, 1)</expression>
            <length>1</length>
        </expressionFields>
        <expressionFields>
            <alias>MeasurementDate</alias>
            <dataType>Date</dataType>
            <expression>TODAY() + (-1)</expression>
        </expressionFields>
        <label>Transform Benefit Assignment And Indicator Records</label>
        <name>Transform_Benefit_Assignment_And_Indicator_Records</name>
        <sourceName>Benefit_Assignment_And_Indicator_Records</sourceName>
        <transformationType>Expression</transformationType>
    </transforms>
    <transforms>
        <description>Update BenefitValue For Invalid Records</description>
        <expressionFields>
            <alias>ActualBenefitValue</alias>
            <dataType>Numeric</dataType>
            <decimalPlaces>2</decimalPlaces>
            <expression>IF({IsModifiedWithinTimePeriod} == 1 &amp;&amp; {IsProgramEnrollmentPresent} == 1, {BenefitValue}, 0)</expression>
            <length>16</length>
        </expressionFields>
        <label>Update BenefitValue For Invalid Records</label>
        <name>Update_BenefitValue_For_Invalid_Records</name>
        <sourceName>Transform_Benefit_Assignment_And_Indicator_Records</sourceName>
        <transformationType>Expression</transformationType>
    </transforms>
    <writebacks>
        <description>Create IndicatorResult Records</description>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>IndicatorPerformancePeriod_Id</sourceFieldName>
            <targetFieldName>IndicatorPerformancePeriodId</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>MeasurementDate</sourceFieldName>
            <targetFieldName>MeasurementDate</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>TotalBenefitValue</sourceFieldName>
            <targetFieldName>ResultValue</targetFieldName>
        </fields>
        <isChangedRow>false</isChangedRow>
        <label>Create IndicatorResult Records</label>
        <name>Create_IndicatorResult_Records</name>
        <operationType>Insert</operationType>
        <sourceName>IndicatorResult_Records_To_Create</sourceName>
        <storageType>sObject</storageType>
        <targetObjectName>IndicatorResult</targetObjectName>
        <writebackSequence>1</writebackSequence>
        <writebackUser>005Hr00000IYvSCIA1</writebackUser>
    </writebacks>
    <writebacks>
        <description>Update IndicatorResult Records</description>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>IndicatorResult_Id</sourceFieldName>
            <targetFieldName>Id</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>MeasurementDate</sourceFieldName>
            <targetFieldName>MeasurementDate</targetFieldName>
        </fields>
        <fields>
            <runtimeParameter>false</runtimeParameter>
            <sourceFieldName>TotalBenefitValue</sourceFieldName>
            <targetFieldName>ResultValue</targetFieldName>
        </fields>
        <isChangedRow>false</isChangedRow>
        <label>Update IndicatorResult Records</label>
        <name>Update_IndicatorResult_Records</name>
        <operationType>Update</operationType>
        <sourceName>IndicatorResult_Records_To_Update</sourceName>
        <storageType>sObject</storageType>
        <targetObjectName>IndicatorResult</targetObjectName>
        <writebackSequence>1</writebackSequence>
        <writebackUser>005Hr00000IYvSCIA1</writebackUser>
    </writebacks>
</BatchCalcJobDefinition>
